{"version":3,"file":"ValidationSchemaToMetadataTransformer.js","sourceRoot":"","sources":["../../../src/validation-schema/ValidationSchemaToMetadataTransformer.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,kBAAkB,EAAE,MAAM,gCAAgC,CAAC;AAIpE;;GAEG;AACH,MAAM,OAAO,qCAAqC;IAChD,SAAS,CAAC,MAAwB;QAChC,MAAM,SAAS,GAAyB,EAAE,CAAC;QAC3C,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;YAChD,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;gBAC/C,MAAM,iBAAiB,GAAsB;oBAC3C,OAAO,EAAE,UAAU,CAAC,OAAO;oBAC3B,MAAM,EAAE,UAAU,CAAC,MAAM;oBACzB,MAAM,EAAE,UAAU,CAAC,MAAM;oBACzB,IAAI,EAAE,UAAU,CAAC,IAAI;iBACtB,CAAC;gBACF,MAAM,IAAI,GAA2B;oBACnC,IAAI,EAAE,UAAU,CAAC,IAAI;oBACrB,MAAM,EAAE,MAAM,CAAC,IAAI;oBACnB,YAAY,EAAE,QAAQ;oBACtB,WAAW,EAAE,UAAU,CAAC,WAAW;oBACnC,qBAAqB,EAAE,UAAU,CAAC,OAAO;oBACzC,iBAAiB,EAAE,iBAAiB;iBACrC,CAAC;gBACF,SAAS,CAAC,IAAI,CAAC,IAAI,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC;YAC/C,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QACH,OAAO,SAAS,CAAC;IACnB,CAAC;CACF","sourcesContent":["import { ValidationSchema } from './ValidationSchema';\r\nimport { ValidationMetadata } from '../metadata/ValidationMetadata';\r\nimport { ValidationMetadataArgs } from '../metadata/ValidationMetadataArgs';\r\nimport { ValidationOptions } from '../decorator/ValidationOptions';\r\n\r\n/**\r\n * Used to transform validation schemas to validation metadatas.\r\n */\r\nexport class ValidationSchemaToMetadataTransformer {\r\n  transform(schema: ValidationSchema): ValidationMetadata[] {\r\n    const metadatas: ValidationMetadata[] = [];\r\n    Object.keys(schema.properties).forEach(property => {\r\n      schema.properties[property].forEach(validation => {\r\n        const validationOptions: ValidationOptions = {\r\n          message: validation.message,\r\n          groups: validation.groups,\r\n          always: validation.always,\r\n          each: validation.each,\r\n        };\r\n        const args: ValidationMetadataArgs = {\r\n          type: validation.type,\r\n          target: schema.name,\r\n          propertyName: property,\r\n          constraints: validation.constraints,\r\n          validationTypeOptions: validation.options,\r\n          validationOptions: validationOptions,\r\n        };\r\n        metadatas.push(new ValidationMetadata(args));\r\n      });\r\n    });\r\n    return metadatas;\r\n  }\r\n}\r\n"]}