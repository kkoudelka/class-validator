{"version":3,"file":"ValidateBy.js","sourceRoot":"","sources":["../../../../src/decorator/common/ValidateBy.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,iBAAiB,EAAE,MAAM,0BAA0B,CAAC;AAW7D,MAAM,UAAU,YAAY,CAC1B,IAAgE,EAChE,iBAAqC;IAErC,OAAO,UAAC,mBAAyC;QAC/C,IAAM,UAAU,GAAG,iBAAiB,IAAI,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,EAAE,CAAC;QACvF,OAAO,IAAI,CAAC,UAAU,EAAE,mBAAmB,CAAC,CAAC;IAC/C,CAAC,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,UAAU,CAAC,OAA0B,EAAE,iBAAqC;IAC1F,OAAO,UAAU,MAAc,EAAE,YAAoB;QACnD,iBAAiB,CAAC;YAChB,IAAI,EAAE,OAAO,CAAC,IAAI;YAClB,MAAM,EAAE,MAAM,CAAC,WAAW;YAC1B,YAAY,EAAE,YAAY;YAC1B,OAAO,EAAE,iBAAiB;YAC1B,WAAW,EAAE,OAAO,CAAC,WAAW;YAChC,SAAS,EAAE,OAAO,CAAC,SAAS;SAC7B,CAAC,CAAC;IACL,CAAC,CAAC;AACJ,CAAC","sourcesContent":["import { ValidationOptions } from '../ValidationOptions';\r\nimport { registerDecorator } from '../../register-decorator';\r\nimport { ValidationArguments } from '../../validation/ValidationArguments';\r\nimport { ValidatorConstraintInterface } from '../../validation/ValidatorConstraintInterface';\r\n\r\nexport interface ValidateByOptions {\r\n  name: string;\r\n  constraints?: any[];\r\n  validator: ValidatorConstraintInterface | Function;\r\n  async?: boolean;\r\n}\r\n\r\nexport function buildMessage(\r\n  impl: (eachPrefix: string, args?: ValidationArguments) => string,\r\n  validationOptions?: ValidationOptions\r\n): (validationArguments?: ValidationArguments) => string {\r\n  return (validationArguments?: ValidationArguments): string => {\r\n    const eachPrefix = validationOptions && validationOptions.each ? 'each value in ' : '';\r\n    return impl(eachPrefix, validationArguments);\r\n  };\r\n}\r\n\r\nexport function ValidateBy(options: ValidateByOptions, validationOptions?: ValidationOptions): PropertyDecorator {\r\n  return function (object: object, propertyName: string): void {\r\n    registerDecorator({\r\n      name: options.name,\r\n      target: object.constructor,\r\n      propertyName: propertyName,\r\n      options: validationOptions,\r\n      constraints: options.constraints,\r\n      validator: options.validator,\r\n    });\r\n  };\r\n}\r\n"]}